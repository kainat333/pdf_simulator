{% extends 'base.html' %}

{% block title %}Question {{ question_index|add:1 }}{% endblock %}

{% block content %}
<div class="quiz-container">
    <div class="quiz-header">
        <div class="question-counter">
            Question {{ question_index|add:1 }} / {{ total_questions }}
        </div>
        <div class="timer" id="timer" data-time-remaining="{{ time_remaining }}">
            <span class="timer-icon">⏱</span>
            <span id="timer-display">01:00:00</span>
        </div>
    </div>

    <div class="question-card">
        <div class="question-number">Question {{ question.question_number }}</div>
        <div class="question-text">{{ question.question_text }}</div>

        <div class="options-container">
            <div class="option-wrapper">
                <input type="radio" 
                       id="option_a" 
                       name="answer" 
                       value="A" 
                       {% if selected_answer == 'A' %}checked{% endif %}
                       class="option-input">
                <label for="option_a" class="option-label">
                    <span class="option-letter">A</span>
                    <span class="option-text">{{ question.option_a }}</span>
                </label>
            </div>

            <div class="option-wrapper">
                <input type="radio" 
                       id="option_b" 
                       name="answer" 
                       value="B" 
                       {% if selected_answer == 'B' %}checked{% endif %}
                       class="option-input">
                <label for="option_b" class="option-label">
                    <span class="option-letter">B</span>
                    <span class="option-text">{{ question.option_b }}</span>
                </label>
            </div>

            <div class="option-wrapper">
                <input type="radio" 
                       id="option_c" 
                       name="answer" 
                       value="C" 
                       {% if selected_answer == 'C' %}checked{% endif %}
                       class="option-input">
                <label for="option_c" class="option-label">
                    <span class="option-letter">C</span>
                    <span class="option-text">{{ question.option_c }}</span>
                </label>
            </div>

            <div class="option-wrapper">
                <input type="radio" 
                       id="option_d" 
                       name="answer" 
                       value="D" 
                       {% if selected_answer == 'D' %}checked{% endif %}
                       class="option-input">
                <label for="option_d" class="option-label">
                    <span class="option-letter">D</span>
                    <span class="option-text">{{ question.option_d }}</span>
                </label>
            </div>
        </div>
    </div>

    <div class="navigation-buttons">
        <div class="nav-left">
            {% if question_index > 0 %}
                <a href="{% url 'quiz_question' question_index|add:-1 %}" class="btn btn-previous">
                    ← Previous
                </a>
            {% endif %}
        </div>
        <div class="nav-center">
            <form action="{% url 'submit_quiz' %}" method="post" onsubmit="return confirm('Are you sure you want to submit the quiz?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-submit">Submit Quiz</button>
            </form>
        </div>
        <div class="nav-right">
            {% if question_index < total_questions|add:-1 %}
                <a href="{% url 'quiz_question' question_index|add:1 %}" class="btn btn-next">
                    Next →
                </a>
            {% endif %}
        </div>
    </div>
</div>

<script>
    const questionId = {{ question.id }};
    const timeRemaining = {{ time_remaining }};
</script>
{% endblock %}

{% block extra_js %}
<script src="/static/js/quiz.js"></script>
{% endblock %}
